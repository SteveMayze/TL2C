EESchema Schematic File Version 2
LIBS:tl2c-symbols
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:tl2c-cache
EELAYER 25 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 4
Title "TL2C - Timed LED Lighting Controller"
Date "2016-12-14"
Rev "2L.1"
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L ATTINY20-X IC101
U 1 1 584C1FC2
P 4250 5200
F 0 "IC101" H 3300 5950 50  0000 C CNN
F 1 "ATTINY20-X" H 5050 4450 50  0000 C CNN
F 2 "TSSOP14" H 4250 5300 50  0001 C CIN
F 3 "" H 4250 5200 50  0000 C CNN
F 4 "ATTINY20-SSUR" H 4250 5200 60  0001 C CNN "MFP"
	1    4250 5200
	1    0    0    -1  
$EndComp
$Comp
L C C101
U 1 1 584C320A
P 2850 4850
F 0 "C101" H 2875 4950 50  0000 L CNN
F 1 "100n 10V" H 2450 4750 50  0000 L CNN
F 2 "" H 2888 4700 50  0000 C CNN
F 3 "" H 2850 4850 50  0000 C CNN
	1    2850 4850
	1    0    0    -1  
$EndComp
Text Label 2600 4600 0    60   ~ 0
Ub+
$Comp
L GND #PWR105
U 1 1 584C3309
P 3700 6200
F 0 "#PWR105" H 3700 5950 50  0001 C CNN
F 1 "GND" H 3700 6050 50  0000 C CNN
F 2 "" H 3700 6200 50  0000 C CNN
F 3 "" H 3700 6200 50  0000 C CNN
	1    3700 6200
	1    0    0    -1  
$EndComp
$Comp
L CONN_02X03 P104
U 1 1 584C357B
P 5825 1175
F 0 "P104" H 5825 1375 50  0000 C CNN
F 1 "ISP Header" H 5825 975 50  0000 C CNN
F 2 "" H 5825 -25 50  0000 C CNN
F 3 "" H 5825 -25 50  0000 C CNN
	1    5825 1175
	1    0    0    -1  
$EndComp
Text Label 5175 1075 0    60   ~ 0
MISO
Text Label 5175 1175 0    60   ~ 0
SCK
Text Label 5175 1275 0    60   ~ 0
Reset
Text Label 6325 1075 2    60   ~ 0
Ub+
Text Label 6325 1175 2    60   ~ 0
MOSI
$Comp
L GND #PWR107
U 1 1 584C39BE
P 6175 1375
F 0 "#PWR107" H 6175 1125 50  0001 C CNN
F 1 "GND" H 6175 1225 50  0000 C CNN
F 2 "" H 6175 1375 50  0000 C CNN
F 3 "" H 6175 1375 50  0000 C CNN
	1    6175 1375
	1    0    0    -1  
$EndComp
Text Notes 5175 2025 0    50   ~ 0
We have a 3V3 system \nand possibly a 5V programmer. \nInitial research suggests the AVRISP MkII\ncan drive ISP lines at the required voltage.\nhttps://forum.arduino.cc/index.php?topic=92544.0
$Comp
L R R101
U 1 1 584C40A0
P 3700 3875
F 0 "R101" V 3780 3875 50  0000 C CNN
F 1 "10k立" V 3700 3875 50  0000 C CNN
F 2 "" V 3630 3875 50  0000 C CNN
F 3 "" H 3700 3875 50  0000 C CNN
	1    3700 3875
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR104
U 1 1 584C4458
P 2850 5100
F 0 "#PWR104" H 2850 4850 50  0001 C CNN
F 1 "GND" H 2850 4950 50  0000 C CNN
F 2 "" H 2850 5100 50  0000 C CNN
F 3 "" H 2850 5100 50  0000 C CNN
	1    2850 5100
	1    0    0    -1  
$EndComp
Text Label 3700 3575 2    60   ~ 0
Ub+
Text Label 3350 4225 0    60   ~ 0
Reset
Text Label 5900 5300 2    60   ~ 0
SCK
Text Label 5900 5600 2    60   ~ 0
MOSI
Text Label 5650 5700 2    60   ~ 0
MISO
$Comp
L R R103
U 1 1 584C58EE
P 6050 5600
F 0 "R103" V 6130 5600 50  0000 C CNN
F 1 "330立" V 6050 5600 50  0000 C CNN
F 2 "" V 5980 5600 50  0000 C CNN
F 3 "" H 6050 5600 50  0000 C CNN
	1    6050 5600
	0    1    1    0   
$EndComp
$Comp
L R R102
U 1 1 584C5F14
P 6050 5300
F 0 "R102" V 6130 5300 50  0000 C CNN
F 1 "330立" V 6050 5300 50  0000 C CNN
F 2 "" V 5980 5300 50  0000 C CNN
F 3 "" H 6050 5300 50  0000 C CNN
	1    6050 5300
	0    1    1    0   
$EndComp
Text Label 6500 5300 2    60   ~ 0
SCL
Text Label 6500 5600 2    60   ~ 0
SDA
$Comp
L R R104
U 1 1 584C6CF4
P 6650 5200
F 0 "R104" V 6730 5200 50  0000 C CNN
F 1 "NOPOP" V 6650 5200 50  0000 C CNN
F 2 "" V 6580 5200 50  0000 C CNN
F 3 "" H 6650 5200 50  0000 C CNN
	1    6650 5200
	0    1    1    0   
$EndComp
$Comp
L R R105
U 1 1 584C6E58
P 6650 5500
F 0 "R105" V 6730 5500 50  0000 C CNN
F 1 "NOPOP" V 6650 5500 50  0000 C CNN
F 2 "" V 6580 5500 50  0000 C CNN
F 3 "" H 6650 5500 50  0000 C CNN
	1    6650 5500
	0    1    1    0   
$EndComp
$Comp
L GND #PWR108
U 1 1 584C7124
P 7000 5900
F 0 "#PWR108" H 7000 5650 50  0001 C CNN
F 1 "GND" H 7000 5750 50  0000 C CNN
F 2 "" H 7000 5900 50  0000 C CNN
F 3 "" H 7000 5900 50  0000 C CNN
	1    7000 5900
	1    0    0    -1  
$EndComp
Text Label 5800 4600 2    60   ~ 0
RelayUG
Text Label 5800 4700 2    60   ~ 0
RelayEG
Text Label 5800 4800 2    60   ~ 0
RelayOG
Text Label 5800 4900 2    60   ~ 0
SIG_UG
Text Label 5800 5000 2    60   ~ 0
SIG_EG
Text Label 5800 5100 2    60   ~ 0
SIG_OG
Text Label 6400 5200 2    60   ~ 0
Spare1
Text Label 6400 5500 2    60   ~ 0
Spare2
$Comp
L CONN_01X03 P103
U 1 1 584C77B2
P 2100 3050
F 0 "P103" H 2100 3250 50  0000 C CNN
F 1 "I2C Master" V 2200 3050 50  0000 C CNN
F 2 "" H 2100 3050 50  0000 C CNN
F 3 "" H 2100 3050 50  0000 C CNN
	1    2100 3050
	1    0    0    -1  
$EndComp
Text Label 1500 2950 0    60   ~ 0
SDA
Text Label 950  3050 0    60   ~ 0
SCL
$Comp
L GND #PWR103
U 1 1 584C7C99
P 1750 3250
F 0 "#PWR103" H 1750 3000 50  0001 C CNN
F 1 "GND" H 1750 3100 50  0000 C CNN
F 2 "" H 1750 3250 50  0000 C CNN
F 3 "" H 1750 3250 50  0000 C CNN
	1    1750 3250
	1    0    0    -1  
$EndComp
$Comp
L Relay_JW1AFSN12F REL101
U 2 1 584C8F2D
P 8500 1100
F 0 "REL101" H 8500 1000 60  0000 C CNN
F 1 "Relay_UG" H 8510 1230 60  0000 C CNN
F 2 "" H 8370 1090 60  0000 C CNN
F 3 "" H 8370 1090 60  0000 C CNN
F 4 "JW1AFSN-12-F" H 8500 1100 60  0001 C CNN "MFP"
	2    8500 1100
	1    0    0    -1  
$EndComp
$Comp
L Relay_JW1AFSN12F REL102
U 2 1 584C93FA
P 8500 1500
F 0 "REL102" H 8520 1360 60  0000 C CNN
F 1 "Relay_EG" H 8510 1630 60  0000 C CNN
F 2 "" H 8370 1490 60  0000 C CNN
F 3 "" H 8370 1490 60  0000 C CNN
F 4 "JW1AFSN-12-F" H 8500 1500 60  0001 C CNN "MFP"
	2    8500 1500
	1    0    0    -1  
$EndComp
$Comp
L Relay_JW1AFSN12F REL103
U 2 1 584C945E
P 8500 1950
F 0 "REL103" H 8520 1810 60  0000 C CNN
F 1 "Relay_OG" H 8510 2080 60  0000 C CNN
F 2 "" H 8370 1940 60  0000 C CNN
F 3 "" H 8370 1940 60  0000 C CNN
F 4 "JW1AFSN-12-F" H 8500 1950 60  0001 C CNN "MFP"
	2    8500 1950
	1    0    0    -1  
$EndComp
Text Label 9825 1600 0    60   ~ 0
Neutral
Text Label 9100 1100 0    60   ~ 0
LineUG
Text Label 9100 1500 0    60   ~ 0
LineEG
Text Label 9100 1950 0    60   ~ 0
LineOG
Text Label 7600 1100 0    60   ~ 0
Lin
$Comp
L CONN_01X02 P105
U 1 1 584CF5D0
P 7400 1150
F 0 "P105" H 7400 1300 50  0000 C CNN
F 1 "240VAC" V 7500 1150 50  0000 C CNN
F 2 "" H 7400 1150 50  0000 C CNN
F 3 "" H 7400 1150 50  0000 C CNN
	1    7400 1150
	-1   0    0    -1  
$EndComp
Text Label 7600 1800 1    60   ~ 0
Neutral
$Comp
L SW_PUSH SW101
U 1 1 584CAACE
P 4150 4125
F 0 "SW101" H 4300 4235 50  0000 C CNN
F 1 "Reset" H 4150 4045 50  0000 C CNN
F 2 "" H 4150 4125 50  0000 C CNN
F 3 "" H 4150 4125 50  0000 C CNN
	1    4150 4125
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR106
U 1 1 584CB28B
P 4600 4225
F 0 "#PWR106" H 4600 3975 50  0001 C CNN
F 1 "GND" H 4600 4075 50  0000 C CNN
F 2 "" H 4600 4225 50  0000 C CNN
F 3 "" H 4600 4225 50  0000 C CNN
	1    4600 4225
	1    0    0    -1  
$EndComp
$Comp
L CONN_01X06 P106
U 1 1 584CBB71
P 10400 1350
F 0 "P106" H 10400 1700 50  0000 C CNN
F 1 "LED Driver" V 10500 1350 50  0000 C CNN
F 2 "" H 10400 1350 50  0000 C CNN
F 3 "" H 10400 1350 50  0000 C CNN
	1    10400 1350
	1    0    0    -1  
$EndComp
Text Label 9825 1400 0    60   ~ 0
Neutral
Text Label 9825 1200 0    60   ~ 0
Neutral
$Comp
L CONN_01X02 P102
U 1 1 584CC850
P 2100 3800
F 0 "P102" H 2100 3950 50  0000 C CNN
F 1 "Spare" V 2200 3800 50  0000 C CNN
F 2 "" H 2100 3800 50  0000 C CNN
F 3 "" H 2100 3800 50  0000 C CNN
	1    2100 3800
	1    0    0    -1  
$EndComp
Text Label 1500 3750 0    60   ~ 0
Spare1
Text Label 1500 3850 0    60   ~ 0
Spare2
Text Notes 5650 6050 0    60   ~ 0
TODO - Verify the values \nof the resistors for sharing\nthe IO lines.
$Sheet
S 2200 1150 1800 900 
U 584D9013
F0 "Power System" 60
F1 "PowerSystem.sch" 60
F2 "UbOut" I R 4000 1850 60 
F3 "U+Out" I R 4000 1350 60 
F4 "U+In" I L 2200 1350 60 
$EndSheet
$Comp
L CONN_01X02 P101
U 1 1 584D9CD6
P 1250 1400
F 0 "P101" H 1250 1550 50  0000 C CNN
F 1 "12VDC" V 1350 1400 50  0000 C CNN
F 2 "" H 1250 1400 50  0000 C CNN
F 3 "" H 1250 1400 50  0000 C CNN
	1    1250 1400
	-1   0    0    -1  
$EndComp
Text Label 4500 1350 2    60   ~ 0
U+
Text Label 4500 1850 2    60   ~ 0
Ub+
$Comp
L GND #PWR102
U 1 1 584DF6BA
P 1550 1600
F 0 "#PWR102" H 1550 1350 50  0001 C CNN
F 1 "GND" H 1550 1450 50  0000 C CNN
F 2 "" H 1550 1600 50  0000 C CNN
F 3 "" H 1550 1600 50  0000 C CNN
	1    1550 1600
	1    0    0    -1  
$EndComp
$Comp
L TEST_1P TP102
U 1 1 584E2848
P 1750 2850
F 0 "TP102" H 1750 3120 50  0000 C CNN
F 1 "TPSDA" H 1750 3050 50  0000 C CNN
F 2 "" H 1950 2850 50  0000 C CNN
F 3 "" H 1950 2850 50  0000 C CNN
	1    1750 2850
	1    0    0    -1  
$EndComp
$Comp
L TEST_1P TP101
U 1 1 584E2A24
P 1250 2850
F 0 "TP101" H 1250 3120 50  0000 C CNN
F 1 "TPSCL" H 1250 3050 50  0000 C CNN
F 2 "" H 1450 2850 50  0000 C CNN
F 3 "" H 1450 2850 50  0000 C CNN
	1    1250 2850
	1    0    0    -1  
$EndComp
$Comp
L TEST_1P TP103
U 1 1 584E3051
P 1100 4600
F 0 "TP103" H 1100 4870 50  0000 C CNN
F 1 "TPGND" H 1100 4800 50  0000 C CNN
F 2 "" H 1300 4600 50  0000 C CNN
F 3 "" H 1300 4600 50  0000 C CNN
	1    1100 4600
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR101
U 1 1 584E33BE
P 1100 4700
F 0 "#PWR101" H 1100 4450 50  0001 C CNN
F 1 "GND" H 1100 4550 50  0000 C CNN
F 2 "" H 1100 4700 50  0000 C CNN
F 3 "" H 1100 4700 50  0000 C CNN
	1    1100 4700
	1    0    0    -1  
$EndComp
Text Notes 7800 900  0    60   ~ 0
240VAC - What needs to be considered\nfor the layout here?\n	- Track witdth, thickness, spacing.\n	- Interference
Text Notes 5650 6350 0    60   ~ 0
The RP has 1k8立 pullup\nresistors to 3V3\n
$Sheet
S 8300 4250 800  1350
U 58520450
F0 "PIR13" 60
F1 "PIR13.sch" 60
F2 "InU+" I L 8300 4450 60 
F3 "InUb+" I L 8300 4600 60 
F4 "SIG_UG" I L 8300 5100 60 
F5 "SIG_EG" I L 8300 5250 60 
F6 "SIG_OG" I L 8300 5400 60 
$EndSheet
Text Label 7650 4450 0    60   ~ 0
U+
Text Label 7650 4600 0    60   ~ 0
Ub+
Text Label 7650 5100 0    60   ~ 0
SIG_UG
Text Label 7650 5250 0    60   ~ 0
SIG_EG
Text Label 7650 5400 0    60   ~ 0
SIG_OG
$Sheet
S 8300 2650 750  1250
U 585253A2
F0 "LED Driver" 60
F1 "LED_Driver.sch" 60
F2 "Relay_UG" I L 8300 3600 60 
F3 "Relay_EG" I L 8300 3400 60 
F4 "Relay_OG" I L 8300 3200 60 
F5 "U+" I L 8300 2850 60 
$EndSheet
Wire Wire Line
	2600 4600 3100 4600
Wire Wire Line
	2850 4600 2850 4700
Connection ~ 2850 4600
Wire Wire Line
	6075 1075 6325 1075
Wire Wire Line
	6075 1175 6325 1175
Wire Wire Line
	6075 1275 6175 1275
Wire Wire Line
	5575 1075 5175 1075
Wire Wire Line
	5575 1175 5175 1175
Wire Wire Line
	5575 1275 5175 1275
Wire Wire Line
	6175 1275 6175 1375
Wire Wire Line
	2850 5000 2850 5100
Wire Wire Line
	3700 4025 3700 4350
Wire Wire Line
	3700 3725 3700 3575
Wire Wire Line
	3700 4225 3350 4225
Connection ~ 3700 4225
Wire Wire Line
	3700 6050 3700 6200
Wire Wire Line
	5400 5600 5900 5600
Wire Wire Line
	5400 5700 5650 5700
Wire Wire Line
	5400 5300 5900 5300
Wire Wire Line
	6200 5300 6500 5300
Wire Wire Line
	6200 5600 6500 5600
Wire Wire Line
	5400 5200 6500 5200
Wire Wire Line
	5400 5500 6500 5500
Wire Wire Line
	6800 5200 7000 5200
Wire Wire Line
	7000 5200 7000 5900
Wire Wire Line
	6800 5500 7000 5500
Connection ~ 7000 5500
Wire Wire Line
	1500 2950 1900 2950
Wire Wire Line
	950  3050 1900 3050
Wire Wire Line
	1900 3150 1750 3150
Wire Wire Line
	1750 3150 1750 3250
Wire Wire Line
	8900 1500 9600 1500
Wire Wire Line
	8900 1950 9750 1950
Wire Wire Line
	7600 1100 8100 1100
Wire Wire Line
	8100 1500 7800 1500
Wire Wire Line
	7800 1950 8100 1950
Wire Wire Line
	7800 1100 7800 1950
Connection ~ 7800 1500
Connection ~ 7800 1100
Wire Wire Line
	7600 1200 7600 1800
Wire Wire Line
	8900 1100 10200 1100
Wire Wire Line
	9600 1500 9600 1300
Wire Wire Line
	9600 1300 10200 1300
Wire Wire Line
	9750 1950 9750 1500
Wire Wire Line
	9750 1500 10200 1500
Wire Wire Line
	10200 1600 9825 1600
Wire Wire Line
	10200 1400 9825 1400
Wire Wire Line
	10200 1200 9825 1200
Wire Wire Line
	1900 3750 1500 3750
Wire Wire Line
	1900 3850 1500 3850
Wire Wire Line
	3700 4125 3850 4125
Connection ~ 3700 4125
Wire Wire Line
	4450 4125 4600 4125
Wire Wire Line
	4600 4125 4600 4225
Wire Wire Line
	1450 1350 2200 1350
Wire Wire Line
	4000 1350 4500 1350
Wire Wire Line
	4000 1850 4500 1850
Wire Wire Line
	1450 1450 1550 1450
Wire Wire Line
	1550 1450 1550 1600
Wire Wire Line
	1250 2850 1250 3050
Connection ~ 1250 3050
Wire Wire Line
	1750 2850 1750 2950
Connection ~ 1750 2950
Wire Wire Line
	8300 4450 7650 4450
Wire Wire Line
	8300 4600 7650 4600
Wire Wire Line
	8300 5100 7650 5100
Wire Wire Line
	8300 5250 7650 5250
Wire Wire Line
	8300 5400 7650 5400
Wire Wire Line
	8300 2850 7600 2850
Wire Wire Line
	8300 3200 7600 3200
Wire Wire Line
	8300 3400 7600 3400
Wire Wire Line
	8300 3600 7600 3600
Text Label 7600 2850 0    60   ~ 0
U+
Text Label 7600 3200 0    60   ~ 0
RelayUG
Text Label 7600 3400 0    60   ~ 0
RelayEG
Text Label 7600 3600 0    60   ~ 0
RelayOG
Wire Wire Line
	5800 5000 5400 5000
Wire Wire Line
	5400 5100 5800 5100
Wire Wire Line
	5800 4800 5400 4800
Wire Wire Line
	5400 4700 5800 4700
Wire Wire Line
	5800 4600 5400 4600
Wire Wire Line
	1100 4600 1100 4700
Wire Wire Line
	5400 4900 5800 4900
$EndSCHEMATC
